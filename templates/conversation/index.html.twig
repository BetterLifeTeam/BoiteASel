{% extends 'base.html.twig' %}

{% block title %}Conversation index{% endblock %}

{% block body %}
    <h1>Conversation index</h1>

    <table class="table">
        <thead>
            <tr>
                <th>Sujet</th>
            </tr>
        </thead>
        <tbody>
        {% for conversation in conversations %}
            <tr>
                <td><a href="{{ path('conversation_msg_index', {'selectedConversation': conversation.id}) }}">{{ conversation.duty.title }}</a></td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if message %}
     <table class="table">
        <thead>
            <tr>
                <th>Message</th>
                <th>Auteur</th>
            </tr>
        </thead>
        <tbody>
        {% for msg in message %}
            <tr>
                <td>{{ msg.content }}</td>
                <td>{{ msg.sender }}</td>
            </tr>
            {# <a href="{{ path('conversation_msg_index', {'conv': selectedConversation, 'duty': selectedConversation.duty.id }) }}">DÃ©marrer une conversation</a> #}
        {% else %}
            <tr>
                <td colspan="3">Aucun Message</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    
    {{ form(form) }}

{% endblock %}
